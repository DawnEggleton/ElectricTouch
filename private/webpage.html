<!DOCTYPE html>
<html>
    <head>
        @@include('../source/templates/head.html', {
            "prefix": "../dist"
        })  
    </head>
    <body id="Pages" class="g-4">
        @@include('../source/templates/header.html', {
            "prefix": ".."
        })
      @@include('../source/templates/nav.html', {
            "prefix": ".."
        })

        <!--Main Body-->
        <main>
            <a name="top"></a>
		
		
            <div id="loading">
                <div class="loading-bubble">
                    <i class="fa-regular fa-spinner fa-spin"></i>
                    <p>Loading</p>
                </div>
            </div>

            <!--Webpage-->
            <section class="webpage">
                <div class="webpage--menu">
                    <button class="onlyMobile" onClick="toggleWebpageMenu(this)">
                        <div class="menu-bar menu-top"></div>
                        <div class="menu-bar menu-middle"></div>
                        <div class="menu-bar menu-bottom"></div>
                    </button>
                    <tag-labels class="accordion scroll">
                        <tag-label data-category="info" class="tab-category accordion--trigger">
                            <span>Required Reading</span>
                        </tag-label>
                        <div data-category="info" class="tab-category accordion--content">
                            <a href="#etiquette">Etiquette</a>
                            <a href="#plot">Plot</a>
                            <a href="#setting">Setting</a>
                            <a href="#groups">Member Groups</a>
                            <a href="#credits">Credits</a>
                        </div>
                        <tag-label data-category="subplots" class="tab-category accordion--trigger">
                            <span>Subplots</span>
                        </tag-label>
                        <div data-category="subplots" class="tab-category accordion--content"></div>
                        <tag-label data-category="guides" class="tab-category accordion--trigger">
                            <span>Guides</span>
                        </tag-label>
                        <div data-category="guides" class="tab-category accordion--content">
                            <a href="#start">Getting Started</a>
                            <a href="#application">Applications</a>
                            <a href="./species.html">Species</a>
                            <a href="./businesses.html">Businesses</a>
                        </div>
                        <tag-label data-category="registration" class="tab-category accordion--trigger">
                            <span>Registration</span>
                        </tag-label>
                        <div data-category="registration" class="tab-category accordion--content">
                            <a href="#reserve-face">Reserve a Face</a>
                            <a href="#reserve-role">Reserve a Subplot Role</a>
                            <a href="#species-request">Request a Species</a>
                            <a href="#add-business">Add a Business</a>
                            <a href="#sort">Get Sorted</a>
                            <a href="#join-subplot">Join a Subplot</a>
                        </div>
                        <tag-label data-category="claims" class="tab-category accordion--trigger">
                            <span>Claims</span>
                        </tag-label>
                        <div data-category="claims" class="tab-category accordion--content">
                            <a href="#reserves">Face Reserves</a>
                            <a href="#subplot-reserves">Subplot Reserves</a>
                            <a href="#members">Members</a>
                            <a href="#faces">Faces</a>
                            <a href="./businesses.html">Jobs</a>
                            <a href="#subplots">Subplots</a>
                        </div>
                        <tag-label data-category="moderation" class="tab-category accordion--trigger">
                            <span>Moderation</span>
                        </tag-label>
                        <div data-category="moderation" class="tab-category accordion--content">
                            <a href="#editclaims">Edit a Character</a>
                            <a href="#edit-business">Edit a Business</a>
                            <a href="#staff-help">Request Staff Help</a>
                        </div>
                        <tag-label data-category="staff" class="tab-category accordion--trigger">
                            <span>Staff Tools</span>
                        </tag-label>
                        <div data-category="staff" class="tab-category accordion--content">
                            <a href="#announce">Send Announcement</a>
                            <a href="#add-species">Add Species</a>
                            <a href="#add-subplot">Add Subplot</a>
                        </div>
                    </tag-labels>
                </div>
                <tag-tabset class="webpage--content">
                    <tag-tab class="tab-category" data-category="info">
                        <tag-tabset>
                            <tag-tab data-key="#etiquette">
                                <div class="webpage--content-inner"><div class="scroll">
                                    <h2>Extra large Header</h2>
                                    <h3>Large Header</h3>
                                    <h4>Medium Header</h4>
                                    <h5>Small Header</h5>
                                    <h6>Extra Small Header</h6>
                                    <h7>Block Header Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</h7>
                                    <h8>Block Header 2 Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua</h8>
                                    <blockquote>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</blockquote>
                                    <ul>
                                        <li>List item</li>
                                        <li>List item</li>
                                    </ul>
                                    <p>Lorem ipsum dolor <b>sit amet</b>, consectetur adipiscing elit, sed do <i>eiusmod tempor incididunt</i> ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. <u>Duis aute irure</u> dolor in reprehenderit in voluptate velit esse <s>cillum dolore</s> eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit <a>anim id est laborum</a>.</p>
                                    <p>Lorem ipsum dolor <b>sit amet</b>, consectetur adipiscing elit, sed do <i>eiusmod tempor incididunt</i> ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. <u>Duis aute irure</u> dolor in reprehenderit in voluptate velit esse <s>cillum dolore</s> eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit <a>anim id est laborum</a>.</p>
                                    <p>Lorem ipsum dolor <b>sit amet</b>, consectetur adipiscing elit, sed do <i>eiusmod tempor incididunt</i> ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. <u>Duis aute irure</u> dolor in reprehenderit in voluptate velit esse <s>cillum dolore</s> eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit <a>anim id est laborum</a>.</p>
                                    <p>Lorem ipsum dolor <b>sit amet</b>, consectetur adipiscing elit, sed do <i>eiusmod tempor incididunt</i> ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. <u>Duis aute irure</u> dolor in reprehenderit in voluptate velit esse <s>cillum dolore</s> eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit <a>anim id est laborum</a>.</p>
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#plot">
                                <div class="webpage--content-inner"><div class="scroll">
                                    Plot
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#setting">
                                <div class="webpage--content-inner"><div class="scroll">
                                    Setting
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#groups">
                                <div class="webpage--content-inner"><div class="scroll">
                                    Groups
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#credits">
                                <div class="webpage--content-inner"><div class="scroll">
                                    Credits
                                </div></div>
                            </tag-tab>
                        </tag-tabset>
                    </tag-tab>
                    <tag-tab class="tab-category" data-category="subplots">
                        <tag-tabset></tag-tabset>
                    </tag-tab>
                    <tag-tab class="tab-category" data-category="guides">
                        <tag-tabset>
                            <tag-tab data-key="#start">
                                <div class="webpage--content-inner"><div class="scroll">
                                    Getting started
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#application">
                                <div class="webpage--content-inner"><div class="scroll">
                                    Application Guide
                                </div></div>
                            </tag-tab>
                        </tag-tabset>
                    </tag-tab>
                    <tag-tab class="tab-category" data-category="registration">
                        <tag-tabset>
                            <tag-tab data-key="#reserve-face">
                                <div class="webpage--content-inner"><div class="scroll">
                                    @@include('../source/templates/forms/reserve-face.html')
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#reserve-role">
                                <div class="webpage--content-inner"><div class="scroll">
                                    @@include('../source/templates/forms/reserve-subplot.html')
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#species-request">
                                <div class="webpage--content-inner"><div class="scroll">
                                    @@include('../source/templates/forms/request-species.html')
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#add-business">
                                <div class="webpage--content-inner"><div class="scroll">
                                    @@include('../source/templates/forms/add-business.html')
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#sort">
                                <div class="webpage--content-inner"><div class="scroll">
                                    @@include('../source/templates/forms/sort.html')
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#join-subplot">
                                <div class="webpage--content-inner"><div class="scroll">
                                    @@include('../source/templates/forms/join-subplot.html')
                                </div></div>
                            </tag-tab>
                        </tag-tabset>
                    </tag-tab>
                    <tag-tab class="tab-category" data-category="claims">
                        <tag-tabset>
                            <tag-tab data-key="#reserves">
                                <div class="webpage--content-inner"><div class="scroll">
                                    <div class="claim-wrap" data-type="grid" data-columns="3" style="margin-bottom: 20px;">
                                        <div>
                                            <strong class="h7">Filter by Face</strong>
                                            <input type="text" data-filter="#reserves" data-objects="> strong" data-headers="h2" onkeyup="filterValue(this)" placeholder="Face" style="width: 100%;">
                                        </div>
                                    
                                        <div>
                                            <strong class="h7">Filter by Member</strong>
                                            <input type="text" data-filter="#reserves" data-objects="> strong + span" data-headers="h2" onkeyup="filterValue(this)" placeholder="Member" style="width: 100%;">
                                        </div>
                                    </div>
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#subplot-reserves">
                                <div class="webpage--content-inner"><div class="scroll"></div></div>
                            </tag-tab>
                            <tag-tab data-key="#members">
                                <div class="webpage--content-inner"><div class="scroll"></div></div>
                            </tag-tab>
                            <tag-tab data-key="#faces">
                                <div class="webpage--content-inner"><div class="scroll">
                                    <div class="claim-wrap" data-type="grid" data-columns="3">
                                        <div>
                                            <strong class="h7">Filter by Face</strong>
                                            <input type="text" data-filter="#faces" data-objects="> strong > a" data-headers="h2" onkeyup="filterValue(this)" placeholder="Face" style="width: 100%;">
                                        </div>
                                    
                                        <div>
                                            <strong class="h7">Filter by Character</strong>
                                            <input type="text" data-filter="#faces" data-objects="> strong + span > a" data-headers="h2" onkeyup="filterValue(this)" placeholder="Character" style="width: 100%;">
                                        </div>
                                    
                                        <div>
                                            <strong class="h7">Filter by Member</strong>
                                            <input type="text" data-filter="#faces" data-objects="> strong + span + span > a" data-headers="h2" onkeyup="filterValue(this)" placeholder="Member" style="width: 100%;">
                                        </div>
                                    </div>
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#subplots">
                                <div class="webpage--content-inner"><div class="scroll"></div></div>
                            </tag-tab>
                        </tag-tabset>
                    </tag-tab>
                    <tag-tab class="tab-category" data-category="moderation">
                        <tag-tabset>
                            <tag-tab data-key="#editclaims">
                                <div class="webpage--content-inner"><div class="scroll">
                                    Claims edit form
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#edit-business">
                                <div class="webpage--content-inner"><div class="scroll">
                                    Business edit form
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#staff-help">
                                <div class="webpage--content-inner"><div class="scroll">
                                    Staff help form
                                </div></div>
                            </tag-tab>
                        </tag-tabset>
                    </tag-tab>
                    <tag-tab class="tab-category" data-category="staff">
                        <tag-tabset>
                            <tag-tab data-key="#announce">
                                <div class="webpage--content-inner"><div class="scroll">
                                    @@include('../source/templates/forms/announce.html')
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#add-species">
                                <div class="webpage--content-inner"><div class="scroll">
                                    @@include('../source/templates/forms/add-species.html')
                                </div></div>
                            </tag-tab>
                            <tag-tab data-key="#add-subplot">
                                <div class="webpage--content-inner"><div class="scroll">
                                    @@include('../source/templates/forms/plot.html')
                                </div></div>
                            </tag-tab>
                        </tag-tabset>
                    </tag-tab>
                </tag-tabset>
            </section>

            <script src="../dist/js/webpageFunctions.js"></script>
            <script src="../dist/js/formatFunctions.js"></script>
            <script src="../dist/js/webpageScripts.js"></script>
            <script>
                const sheetID = '1mrdIG_MZ-f0jBHb-8_5aRGCczs5f3sl5WglDF0D1XwU';
                const deployID = 'AKfycbx-PjF_7gGgm9QOilpWR6x_QGuKRys5Cjd3wbexK-P2hyxquvLreQW7meY567tPomB2';
                
                const businessBot = `1177012692863688714/hnbLmkEeWwLvy2Mogz0EEXtFZdMLk4Pc4_LXUqgYfCwKtzNhNbNMaNeqjv9Rr6MU7FUr`;
                const editBot = `1124141336120000562/FhVK1QATZQU4JiVE-jFde6dqv2cqY2VnlZZtQfzcyyvjk75YcLXJMWNeSYfP0cB-MAiY`;
                const modBot = `1124053071866122300/gtx0lNZjQ3N-SZPuTUmTKhT_1m1NubxE4SsZchoeS-m5fAFo04m3Cdfd4GXVVed9Eop4`;
                const reserveBot = `1124335641191260251/x_KFeOHJ32QKIcmCuVa4qwzEJLrlc0BP61kTaT3YANJSnhZ77GqiDt0d17M7TinPT1h2`;
                const sortBot = `1124104686857883748/Dh42I7Eh6Gbe22wSEnQ21nQJxkr9v1TNPr7tVRrqkcKXc_Gw4Axt7XCBuOHAdocl40RA`;
                const speciesBot = `1124303973248151572/7CTHEhHhMwossK1bf8J7JDu3XW0gdPOp6gI5zM0s16FmahlM3sUJytNXE4rMksHbCr6h`;
                const announceBot = `1124162110750994474/YF0rNXP5bc3GvYUjn-0_Hn0yHBU5YgUF6vFfi1qLZM7xmOm95y0Zg0UtMY8KNBVRs50N`;
                const publicSortBot = `1124161944119685150/oH3fHzZWdI4Yzt7Td8AnvP0XcHLgXm_RJTq0pVI19s1lpCfiI2WkTqK7Y_BmpTLuFe1A`;
                const publicSpeciesBot = `1124303807858344007/AW_ejzMEqfK0BbjLvNcA6n2RfCz8JLHo-f4sgeI0DayK4YYi_u1NLFXwCSIr8ETzryR_`;
                const subplotBot = `1195395969433477251/lfJPrZBczyPeUNVfpO6qWYhvijdiry38IPfJ1t3urdR2ScmFCHsNvRpi_qJSoohLMNC3`;
                const speciesAnnouncement = `1195496716670083082/yJIenU4kdwM-T-xhA2Y1q1OhSvuwm0pDh2vicSfPaoJRzRcNSI1DrLl2K4RJvjMG5u-3`;

                const claims = `https://opensheet.elk.sh/${sheetID}/Claims`;
                const reserves = `https://opensheet.elk.sh/${sheetID}/Reserves`;
                const subplotReserves = `https://opensheet.elk.sh/${sheetID}/SubplotReserves`;
                const subplots = `https://opensheet.elk.sh/${sheetID}/Subplots`;
                const businesses = `https://opensheet.elk.sh/${sheetID}/Businesses`;

                let businessList = ``;

                fetch(claims)
                .then((response) => response.json())
                .then((claimsData) => {
                    formatFaces(claimsData);
                    formatMembers(claimsData);
                    formatSubplotClaims(claimsData);
                    
                    fetch(reserves)
                    .then((response) => response.json())
                    .then((reservesData) => {
                        formatFaceReserves(reservesData, claimsData);

                        fetch(subplotReserves)
                        .then((response) => response.json())
                        .then((subplotReservesData) => {
                            formatSubplotReserves(subplotReservesData);

                            fetch(subplots)
                            .then((response) => response.json())
                            .then((subplotData) => {
                                formatSubplot(subplotData);
                                initJoinSelect(subplotData, `#form-join-plot`);
                                initJoinSelect(subplotData, `#form-reserve-plot`);

                                fetch(businesses)
                                .then((response) => response.json())
                                .then((businessData) => {
                                    let businessArray = businessData
                                        .filter(item => item.Hiring !== 'No')
                                        .sort((a, b) => {
                                            if (a.Hiring.toLowerCase() === 'yes' && b.Hiring.toLowerCase() !== 'yes') {
                                                return -1;
                                            } else if (a.Hiring.toLowerCase() !== 'yes' && b.Hiring.toLowerCase() === 'yes') {
                                                return 1;
                                            } else if (a.Employer.toLowerCase().replace('the ', '') < b.Employer.toLowerCase().replace('the ', '')) {
                                                return -1;
                                            } else if (a.Employer.toLowerCase().replace('the ', '') > b.Employer.toLowerCase().replace('the ', '')) {
                                                return 1;
                                            } else {
                                                return 0;
                                            }
                                        });

                                    businessArray.forEach((business, i) => {
                                        //First
                                        if(i === 0) {
                                            let optgroup = `Ask First`;
                                            if(business.Hiring.toLowerCase() === 'yes') {
                                                optgroup = `Actively Hiring`;
                                            }
                                            businessList += `<optgroup label="${optgroup}">`;
                                            businessList += `<option value="${business.Employer}">${capitalize(business.Employer)}</option>`;
                                        }
                                        //Different Hiring Status
                                        else if (businessArray[i - 1].Hiring.toLowerCase() !== business.Hiring.toLowerCase()) {
                                            let optgroup = `Ask First`;
                                            if(business.Hiring.toLowerCase() === 'yes') {
                                                optgroup = `Actively Hiring`;
                                            }
                                            businessList += `</optgroup>`;
                                            businessList += `<optgroup label="${optgroup}">`;
                                            businessList += `<option value="${business.Employer}">${capitalize(business.Employer)}</option>`;
                                        } else {
                                            businessList += `<option value="${business.Employer}">${capitalize(business.Employer)}</option>`;
                                        }
                                        if(i === businessArray.length - 1) {
                                            businessList += `</optgroup>`;
                                        }
                                    });

                                    document.querySelectorAll('#job-count').forEach(jobCount => {
                                        handleJobFields(jobCount.closest('form'), jobCount);
                                    })
                                    
                                }).then(() => {
                                    initWebpages();
                                });
                                
                            });
                            
                        });

                    });

                });
            </script>

            <!-- Copyright Information -->
                <div class="tableborder" align="center">
                    <div class="row4" style="font-size: 7.5pt; padding-top: 1px; padding-bottom: 1px; line-height: 8pt;">
                        <div class="copyright" align="center">
                            Powered by 
                            <a href="https://www.invisionboard.com" target="_blank">Invision Power Board</a>
                            (<a href="http://jcink.com" target="_blank">Jcink.com </a>
                            <a href="https://jcink.com" target="_blank">Forum Hosting</a>
                            ) © 2020 &nbsp;
                            <a href="https://www.invisionpower.com" target="_blank">IPS, Inc.</a>
                            <br>
                            Page creation time: 0.0054 <!-- http://luxtradition.b1.jcink.com -->  · 
                            <a href="index.php?act=Mobile">Mobile Version</a> · 
                            <a href="index.php?act=privacy">Privacy Policy</a>
                        </div>
                    </div>
                </div> 
        </main>

        
        @@include('../source/templates/scripts.html', {
            "prefix": "../dist"
        })   
    </body>
</html>